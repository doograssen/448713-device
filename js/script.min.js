"use strict";var map,ESC_CODE=27,showModalBtn=document.querySelector(".about__link--feedback"),showMap=document.querySelector(".about__map"),modal=document.querySelectorAll(".modal"),feedBack=document.querySelector(".modal--feedback"),fields=feedBack.querySelectorAll("input,textarea"),userName=feedBack.querySelector('[name="user-name"]'),email=feedBack.querySelector('[name="user-mail"]'),letter=feedBack.querySelector('[name="user-feedback"]'),storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("userEmail"),interactiveMap=document.querySelector(".modal--map"),closeFeedbackBtn=feedBack.querySelector(".modal__close"),closeMapBtn=interactiveMap.querySelector(".modal__close"),googleMap=interactiveMap.querySelector(".modal__google-map"),mapLink=interactiveMap.querySelector(".modal__link");function checkStorageField(e,a,t){return e?(a.value=e,t.focus(),!0):(a.focus(),!1)}function checkField(e){return!e.value&&(e.classList.add("feedback__error"),!0)}function checkForm(){var e=!1;return fields.forEach(function(a){e|=checkField(a)}),e}function clearOnClose(){fields.forEach(function(e){e.classList.remove("feedback__error"),e.value=""}),feedBack.classList.toggle("modal--show")}function addChangeListeners(){fields.forEach(function(e){e.addEventListener("change",function(){this.classList.contains("feedback__error")&&this.classList.remove("feedback__error")})})}function initMap(){var e={lat:55.687239,lng:37.529634};map=new google.maps.Map(googleMap,{zoom:17,center:e});new google.maps.Marker({position:e,map:map,title:"Device Market!"})}showModalBtn.addEventListener("click",function(e){e.preventDefault(),feedBack.classList.toggle("modal--show"),checkStorageField(storageName,userName,email)&&checkStorageField(storageEmail,email,letter)}),showMap.addEventListener("click",function(e){e.preventDefault(),interactiveMap.classList.toggle("modal--show")}),closeFeedbackBtn.addEventListener("click",clearOnClose),closeMapBtn.addEventListener("click",function(){interactiveMap.classList.toggle("modal--show")}),window.addEventListener("keydown",function(e){if(e.keyCode===ESC_CODE)for(var a=modal.length,t=0;t<a;t++)if(modal[t].classList.contains("modal--show"))return modal[t].classList.contains("modal--feedback")?void clearOnClose():void modal[t].classList.remove("modal--show")}),feedBack.addEventListener("submit",function(e){checkForm()?e.preventDefault():(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmail",email.value))}),addChangeListeners(),mapLink.addEventListener("click",function(e){e.preventDefault()});